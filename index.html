<canvas id="ex3"><canvas>
        <script>
            const canvas = document.getElementById("ex3");
            const context = canvas.getContext("2d");

            canvas.width = 300;
            canvas.height = 300;



            const rand = function (num) {
                return Math.floor(Math.random() * num) + 1;
            }

            const dirArray = [
                [-1, -1],
                [-1, 0],
                [-1, 1],
                [0, -1],
                [0, 1],
                [1, -1],
                [1, 0],
                [1, 1]
            ];
            //const heroDir = dirArray[rand(dirArray.length-1)];

            const leftKey = 37;
            const upKey = 38;
            const rightKey = 39;
            const downKey = 40;

            /*document.addEventListener('keydown', function(event) {
                if(event.keyCode === upKey) {
                    console.log('up key was pressed');
                }
            }, false);*/

            const goodGuyImg = new Image();
            goodGuyImg.src = "http://local-static0.forum-files.fobby.net/forum_attachments/0037/0535/hunk.gif";
            /*goodGuyImg.onload = function(){
                context.drawImage(goodGuyImg, 0, 0);
            };*/

            const badGuyImg = new Image();
            badGuyImg.src = 'https://downloadcrackz.com/Content/Images/Icons/Godot-Engine.png';

            const gameData = {
                hero: {
                    x: 0,
                    y: 0,
                    xDelta: 0,
                    yDelta: 0,
                    width: 30,
                    height: 30,
                    image: goodGuyImg,
                    draw: function () {
                        context.drawImage(this.image, this.x, this.y);
                    },
                    update: function () {
                        //this.xDelta = 0;
                        //this.yDelta = 0;
                        if (this.x < 0) {
                            this.xDelta = 0;
                            this.x = 0;
                        }
                        if (this.x + this.width > canvas.width) {
                            this.xDelta = 0;
                            this.x = canvas.width - this.width;
                        }
                        if (this.y < 0) {
                            this.yDelta = 0;
                            this.y = 0;
                        }
                        if (this.y + this.height > canvas.height) {
                            this.yDelta = 0;
                            this.y = canvas.height - this.height;
                        }


                        if (this.y - this.yDelta >= 0) {
                            this.y += this.yDelta;
                        }
                        if (this.y + this.height + this.yDelta <= canvas.height) {
                            this.y += this.yDelta;
                        }
                        if (this.x - this.xDelta >= 0) {
                            this.x += this.xDelta;
                        }
                        if (this.x + this.width + this.xDelta <= canvas.width) {
                            this.x += this.xDelta;
                        }


                        //this.x += this.xDelta;
                        //this.y += this.yDelta;

                    }
                },
                badGuys: [

                ]
            };


            const generateBadGuys = function (count) {
                for (let i = 0; i < count; i++) {
                    const curBadGuyDir = dirArray[rand(dirArray.length - 1)];
                    gameData.badGuys[i] = {
                        x: rand(canvas.width - 30),
                        y: rand(canvas.height - 30),
                        xDelta: curBadGuyDir[0],
                        yDelta: curBadGuyDir[1],
                        width: 30,
                        height: 30,
                        image: badGuyImg,
                        draw: function () {
                            context.drawImage(this.image, this.x, this.y);
                        },
                        update: function () {
                            this.x += this.xDelta;
                            this.y += this.yDelta;
                            if (this.x <= 0 || this.x + this.width >= canvas.width) {
                                this.xDelta *= -1;
                            }
                            if (this.y <= 0 || this.y + this.height >= canvas.width) {
                                this.yDelta *= -1;
                            }
                        }
                    }
                }
            };




            generateBadGuys(3);
            const draw = function () {
                context.fillStyle = "red";
                context.fillRect(0, 0, canvas.width, canvas.height);
                gameData.hero.draw();
                for (let i = 0; i < gameData.badGuys.length; i++) {
                    gameData.badGuys[i].draw();
                }
            }

            const update = function () {
                gameData.hero.update();
                for (let i = 0; i < gameData.badGuys.length; i++) {
                    gameData.badGuys[i].update();
                }
            }

            const loop = function () {
                draw();
                update();

                requestAnimationFrame(loop);
            };

            loop();


            document.addEventListener('keydown', function (event) {

                if (event.keyCode === upKey && (gameData.hero.y - gameData.hero.yDelta) >= 0) {
                    gameData.hero.yDelta = -5;
                }
                if (event.keyCode === downKey && (gameData.hero.y + gameData.hero.height + gameData.hero.yDelta) <= canvas.height) {
                    gameData.hero.yDelta = 5;
                }
                if (event.keyCode === leftKey && (gameData.hero.x - gameData.hero.xDelta) >= 0) {
                    gameData.hero.xDelta = -5;
                }
                if (event.keyCode === rightKey && (gameData.hero.x + gameData.hero.width + gameData.hero.xDelta) <= canvas.width) {
                    gameData.hero.xDelta = 5;
                }

            }, false);

            document.addEventListener('keyup', function (event) {

                if (event.keyCode === upKey || event.keyCode === downKey) {
                    gameData.hero.yDelta = 0;
                }
                if (event.keyCode === leftKey || event.keyCode === rightKey) {
                    gameData.hero.xDelta = 0;
                }
                

            }, false);


    /*document.addEventListener('keydown', function(event){
                    //console.log(gameData.hero.x);
                    //if((gameData.hero.x - gameData.hero.xDelta) >= 0 && (gameData.hero.x + gameData.hero.width + gameData.hero.xDelta) <= canvas.width && (gameData.hero.y - gameData.hero.yDelta) >= 0 && (gameData.hero.y + gameData.hero.height + gameData.hero.yDelta) <= canvas.height){
                        if(event.keyCode === upKey && (gameData.hero.y - gameData.hero.yDelta) >= 0){
                            gameData.hero.y -= gameData.hero.yDelta;
                            
                        }
                        if(event.keyCode === downKey && (gameData.hero.y + gameData.hero.height + gameData.hero.yDelta) <= canvas.height){
                            gameData.hero.y += gameData.hero.yDelta;
                        }
                        if(event.keyCode === leftKey && (gameData.hero.x - gameData.hero.xDelta) >= 0){
                            gameData.hero.x -= gameData.hero.xDelta;
                        }
                        if(event.keyCode === rightKey && (gameData.hero.x + gameData.hero.width + gameData.hero.xDelta) <= canvas.width){
                            gameData.hero.x += gameData.hero.xDelta;
                        }


                        if(event.keyCode === leftKey && (gameData.hero.x - gameData.hero.xDelta) >= 0 && event.keyCode === downKey && (gameData.hero.y + gameData.hero.height + gameData.hero.yDelta) <= canvas.height){
                            gameData.hero.y += gameData.hero.yDelta;
                            gameData.hero.x -= gameData.hero.xDelta;
                        }
                    

                   // }
                }, false);
    */

</script>